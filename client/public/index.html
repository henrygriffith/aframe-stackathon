<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js'></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script>
        AFRAME.registerComponent('bounce', {
          init: function() {
            this.direction = 1;
            this.position = new THREE.Vector3();
            this.position.copy(this.el.object3D.position);
            setTimeout(() => {
              this.ready = true;
            }, 3000);
          },
          tick: function() {
            if (!this.ready) return;
            let position = this.el.object3D.position.y;
            if (position <= 0) {
              this.direction = 1;
            } else if (position >= 5) {
              this.direction = -1;
            }
            this.el.object3D.position.set(this.position.x, position + 0.05 * this.direction, this.position.z);
          }
        });
      </script>
    <script defer src="index.js"></script>
  </head>
  <body>
      

<!-- --------------------------------------------SCENE----------------------------------- -->

<a-scene physics="debug: false; gravity: -9.8;">
  <a-camera near=0.001></a-camera>
  <a-box position="-1 5 -5" rotation="0 45 0" color="#4CC3D9" shadow body="shape: box;"></a-box>
  <a-box id="target" position="1 3.75 -4" rotation="0 45 0" color="purple" shadow body="shape: box;"></a-box>
  <a-sphere position="0 10 -10" radius="1.25" color="#EF2D5E" shadow body="shape: sphere;"></a-sphere>
  <a-cone position="0 3.75 -4" radius-bottom="1.25" color="green" shadow bounce body="type: static; mass:  shape: cone; addCollideEventListener: true; collisionFlags: 4" constraint="target: #target;"></a-cone>
  <a-torus position="-1 3.75 -7" radius="1.25" scale="0.5 0.5 0.5" color="red" shadow body="shape: capsule; cylinderAxis: z;"></a-torus>
  <a-torus-knot position="0 3.75 -5" radius="1.25" scale="0.5 0.5 0.5" color="blue" shadow body="addCollideEventListener: false;"></a-torus-knot>
  <a-cylinder segments-height="1" segments-radial="10" position="1 4.0 -5" radius="0.5" height="1.5" color="#FFC65D" shadow body="shape: cylinder"></a-cylinder>
  <a-plane position="0 2 -4" rotation="90 0 0" width="1" height="1" color="#7BC8A4" shadow body="type: static; mass: 0; shape: box;"></a-plane>
  <a-torus-knot position="0 0 -7" radius="1.25" scale="5 0.1 5" rotation="0 90 0" color="#7BC8A4" shadow body="type: static; mass: 0; shape: box;"></a-torus-knot>
  <a-sky color="#ECECEC"></a-sky>

  <!-- CAMERA -->
    <a-entity id="camera" camera></a-entity>
  <!-- KNOTS -->
    <a-entity>
        <a-torus-knot class="knot" arc="90" p="7" q="9" radius="3" radius-tubular="0.010" color="purple" position="-10 0.75 -3"></a-torus-knot>
        <a-torus-knot class="knot" arc="90" p="7" q="9" radius="3" radius-tubular="0.010" color="blue" position="0 0.75 -3"></a-torus-knot>
    </a-entity>

    <!-- BOX CLUSTER -->
    <a-entity id="box-cluster">
      <a-box static-body color="lightblue" height='20' width='5' depth='5' position='15 1 -15'></a-box>
    </a-entity>
    <a-entity id="sky-spawner">
            <a-torus-knot arc="90" p="7" q="9" radius="3" radius-tubular="0.010" color="purple" position="-3 0.75 -3"></a-torus-knot>
      <a-torus-knot arc="90" p="7" q="9" radius="3" radius-tubular="0.010" color="purple" position="-2 0.75 -3"></a-torus-knot>
          <a-dodecahedron color="pink" radius="2" position="2 1 -3"></a-dodecahedron>
      <a-entity color="black" width="2" height="3" static-body></a-entity>
    </a-entity>

    <a-sky color="white"></a-sky>

    

  <script> 
      console.log('yay')
    const floorBoard = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1];
    const bridge = [2, 2];
    const skyBoard = [
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1
  ];
  // document.addEventListener('click', spawnAndThrowSticker, false)
  
  // function spawnAndThrowSticker(event) {
  //   let sticker = document.createElement('a-cylinder')
  //   createSticker(sticker)
  //   throwSticker(sticker)
  // }
  
  // function createSticker(sticker) {
  //   let spawner = document.querySelector('#sky-spawner')
  //   sticker.setAttribute('color', 'yellow')
  //   sticker.setAttribute('height', '0.01')
  //   sticker.setAttribute('radius', Math.random())
  //   sticker.setAttribute('position', `${_.random(-1, 1, true)}, ${_.random(-1, 1, true)}, ${_.random(-1, 1, true)}`)
  //   spawner.appendChild(sticker)
  //   sticker.setAttribute('dynamic-body', ' ')
  // }
  
  // function throwSticker(sticker) {
  //   sticker.body.applyImpulse(
  //     /* impulse */        new CANNON.Vec3(0, 1, -1),
  //     /* world position */ new CANNON.Vec3().copy(el.getComputedAttribute('position'))
  //   )
  // }
  
  // for (let i = 0; i < Math.sqrt(skyBoard.length); i++) {
  //   for (let j = 0; j < Math.sqrt(skyBoard.length); j++) {
  //     if ((skyBoard[j * i] - 1) === 1) {
  //       const pos_Y = 20
  //       let pos_Z = (-1 * i * pos_Y) - 4
  //       let pos_X = (j * )
  //     }
  //   }
  // }
    let floorStats = {
      width: 10,
      height: 10,
      depth: 50,
    };
    let floors = document.querySelector('#box-cluster')
    //let floors = document.querySelector('#floors');
  console.log('made it')
    for (let i = 0; i < Math.sqrt(floorBoard.length); i++) {
      for (let j = 0; j < Math.sqrt(floorBoard.length); j++) {
        let pos_Z = (-1 * i * floorStats.height) - 4
        let pos_X = j * floorStats.width;
        const pos_Y = 1;
        
        let current = document.createElement("a-plane")
        floors.appendChild(current)
        current.setAttribute('rotation', '-90 0 0')
        current.setAttribute('width', `${floorStats.width}`)
        current.setAttribute('height', `${floorStats.height}`)
        floorBoard[i] == current.setAttribute('color', 'lightgray')
        current.setAttribute('position', `${pos_X} ${pos_Y} ${pos_Z}`)
        }
      }
    
    </script>
</a-scene>
    

  <script>
    console.log('hi')
    //-----------------------------------------LOAD AFTER A-SCENE------------------------------------------------//

//[
//     1, 1, 1, 1,
//     1, 1, 1, 1,
//     1, 1, 1, 1,
//     1, 1, 1, 1
// ];
$ = queryString => document.querySelector(queryString);

  let boundary = {};
console.log('still here')
//2-D board for floors and then another 2-D board based off of positioning of floors to make wall boundaries
document.querySelector('a-scene').addEventListener('render-target-loaded', () => {
  
})
  </script> -->
  

  </body>

</html>
